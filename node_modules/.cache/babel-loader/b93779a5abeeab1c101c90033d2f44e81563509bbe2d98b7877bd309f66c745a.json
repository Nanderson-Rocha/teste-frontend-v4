{"ast":null,"code":"import _regeneratorRuntime from \"/home/bruno/Documentos/Teste Aiko - FRONT END/teste-frontend-v4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/bruno/Documentos/Teste Aiko - FRONT END/teste-frontend-v4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/home/bruno/Documentos/Teste Aiko - FRONT END/teste-frontend-v4/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VDialog.css\";\n\n// Components\nimport { VDialogTransition } from \"../transitions/index.mjs\";\nimport { VDefaultsProvider } from \"../VDefaultsProvider/index.mjs\";\nimport { VOverlay } from \"../VOverlay/index.mjs\";\nimport { makeVOverlayProps } from \"../VOverlay/VOverlay.mjs\"; // Composables\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useScopeId } from \"../../composables/scopeId.mjs\"; // Utilities\nimport { mergeProps, nextTick, ref, watch } from 'vue';\nimport { focusableChildren, genericComponent, IN_BROWSER, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport var makeVDialogProps = propsFactory(_objectSpread({\n  fullscreen: Boolean,\n  retainFocus: {\n    type: Boolean,\n    \"default\": true\n  },\n  scrollable: Boolean\n}, makeVOverlayProps({\n  origin: 'center center',\n  scrollStrategy: 'block',\n  transition: {\n    component: VDialogTransition\n  },\n  zIndex: 2400\n})), 'VDialog');\nexport var VDialog = genericComponent()({\n  name: 'VDialog',\n  props: makeVDialogProps(),\n  emits: {\n    'update:modelValue': function updateModelValue(value) {\n      return true;\n    },\n    afterEnter: function afterEnter() {\n      return true;\n    },\n    afterLeave: function afterLeave() {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var isActive = useProxiedModel(props, 'modelValue');\n    var _useScopeId = useScopeId(),\n      scopeId = _useScopeId.scopeId;\n    var overlay = ref();\n    function onFocusin(e) {\n      var _overlay$value, _overlay$value2;\n      var before = e.relatedTarget;\n      var after = e.target;\n      if (before !== after && (_overlay$value = overlay.value) !== null && _overlay$value !== void 0 && _overlay$value.contentEl && // We're the topmost dialog\n      (_overlay$value2 = overlay.value) !== null && _overlay$value2 !== void 0 && _overlay$value2.globalTop &&\n      // It isn't the document or the dialog body\n      ![document, overlay.value.contentEl].includes(after) &&\n      // It isn't inside the dialog body\n      !overlay.value.contentEl.contains(after)) {\n        var focusable = focusableChildren(overlay.value.contentEl);\n        if (!focusable.length) return;\n        var firstElement = focusable[0];\n        var lastElement = focusable[focusable.length - 1];\n        if (before === firstElement) {\n          lastElement.focus();\n        } else {\n          firstElement.focus();\n        }\n      }\n    }\n    if (IN_BROWSER) {\n      watch(function () {\n        return isActive.value && props.retainFocus;\n      }, function (val) {\n        val ? document.addEventListener('focusin', onFocusin) : document.removeEventListener('focusin', onFocusin);\n      }, {\n        immediate: true\n      });\n    }\n    function onAfterEnter() {\n      var _overlay$value3;\n      emit('afterEnter');\n      if ((_overlay$value3 = overlay.value) !== null && _overlay$value3 !== void 0 && _overlay$value3.contentEl && !overlay.value.contentEl.contains(document.activeElement)) {\n        overlay.value.contentEl.focus({\n          preventScroll: true\n        });\n      }\n    }\n    function onAfterLeave() {\n      emit('afterLeave');\n    }\n    watch(isActive, /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(val) {\n        var _overlay$value$activa;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (val) {\n                _context.next = 4;\n                break;\n              }\n              _context.next = 3;\n              return nextTick();\n            case 3:\n              (_overlay$value$activa = overlay.value.activatorEl) === null || _overlay$value$activa === void 0 || _overlay$value$activa.focus({\n                preventScroll: true\n              });\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    useRender(function () {\n      var overlayProps = VOverlay.filterProps(props);\n      var activatorProps = mergeProps({\n        'aria-haspopup': 'dialog',\n        'aria-expanded': String(isActive.value)\n      }, props.activatorProps);\n      var contentProps = mergeProps({\n        tabindex: -1\n      }, props.contentProps);\n      return _createVNode(VOverlay, _mergeProps({\n        \"ref\": overlay,\n        \"class\": ['v-dialog', {\n          'v-dialog--fullscreen': props.fullscreen,\n          'v-dialog--scrollable': props.scrollable\n        }, props[\"class\"]],\n        \"style\": props.style\n      }, overlayProps, {\n        \"modelValue\": isActive.value,\n        \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n          return isActive.value = $event;\n        },\n        \"aria-modal\": \"true\",\n        \"activatorProps\": activatorProps,\n        \"contentProps\": contentProps,\n        \"role\": \"dialog\",\n        \"onAfterEnter\": onAfterEnter,\n        \"onAfterLeave\": onAfterLeave\n      }, scopeId), {\n        activator: slots.activator,\n        \"default\": function _default() {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          return _createVNode(VDefaultsProvider, {\n            \"root\": \"VDialog\"\n          }, {\n            \"default\": function _default() {\n              var _slots$default;\n              return [(_slots$default = slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call.apply(_slots$default, [slots].concat(args))];\n            }\n          });\n        }\n      });\n    });\n    return forwardRefs({}, overlay);\n  }\n});","map":{"version":3,"names":["VDialogTransition","VDefaultsProvider","VOverlay","makeVOverlayProps","forwardRefs","useProxiedModel","useScopeId","mergeProps","nextTick","ref","watch","focusableChildren","genericComponent","IN_BROWSER","propsFactory","useRender","makeVDialogProps","_objectSpread","fullscreen","Boolean","retainFocus","type","scrollable","origin","scrollStrategy","transition","component","zIndex","VDialog","name","props","emits","updateModelValue","value","afterEnter","afterLeave","setup","_ref","emit","slots","isActive","_useScopeId","scopeId","overlay","onFocusin","e","_overlay$value","_overlay$value2","before","relatedTarget","after","target","contentEl","globalTop","document","includes","contains","focusable","length","firstElement","lastElement","focus","val","addEventListener","removeEventListener","immediate","onAfterEnter","_overlay$value3","activeElement","preventScroll","onAfterLeave","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_overlay$value$activa","wrap","_callee$","_context","prev","next","activatorEl","stop","_x","apply","arguments","overlayProps","filterProps","activatorProps","String","contentProps","tabindex","_createVNode","_mergeProps","style","onUpdateModelValue","$event","activator","default","_len","args","Array","_key","_slots$default","call","concat"],"sources":["../../../src/components/VDialog/VDialog.tsx"],"sourcesContent":["// Styles\nimport './VDialog.sass'\n\n// Components\nimport { VDialogTransition } from '@/components/transitions'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VOverlay } from '@/components/VOverlay'\nimport { makeVOverlayProps } from '@/components/VOverlay/VOverlay'\n\n// Composables\nimport { forwardRefs } from '@/composables/forwardRefs'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useScopeId } from '@/composables/scopeId'\n\n// Utilities\nimport { mergeProps, nextTick, ref, watch } from 'vue'\nimport { focusableChildren, genericComponent, IN_BROWSER, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { Component } from 'vue'\nimport type { OverlaySlots } from '@/components/VOverlay/VOverlay'\n\nexport const makeVDialogProps = propsFactory({\n  fullscreen: Boolean,\n  retainFocus: {\n    type: Boolean,\n    default: true,\n  },\n  scrollable: Boolean,\n\n  ...makeVOverlayProps({\n    origin: 'center center' as const,\n    scrollStrategy: 'block' as const,\n    transition: { component: VDialogTransition as Component },\n    zIndex: 2400,\n  }),\n}, 'VDialog')\n\nexport const VDialog = genericComponent<OverlaySlots>()({\n  name: 'VDialog',\n\n  props: makeVDialogProps(),\n\n  emits: {\n    'update:modelValue': (value: boolean) => true,\n    afterEnter: () => true,\n    afterLeave: () => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const isActive = useProxiedModel(props, 'modelValue')\n    const { scopeId } = useScopeId()\n\n    const overlay = ref<VOverlay>()\n    function onFocusin (e: FocusEvent) {\n      const before = e.relatedTarget as HTMLElement | null\n      const after = e.target as HTMLElement | null\n\n      if (\n        before !== after &&\n        overlay.value?.contentEl &&\n        // We're the topmost dialog\n        overlay.value?.globalTop &&\n        // It isn't the document or the dialog body\n        ![document, overlay.value.contentEl].includes(after!) &&\n        // It isn't inside the dialog body\n        !overlay.value.contentEl.contains(after)\n      ) {\n        const focusable = focusableChildren(overlay.value.contentEl)\n\n        if (!focusable.length) return\n\n        const firstElement = focusable[0]\n        const lastElement = focusable[focusable.length - 1]\n\n        if (before === firstElement) {\n          lastElement.focus()\n        } else {\n          firstElement.focus()\n        }\n      }\n    }\n\n    if (IN_BROWSER) {\n      watch(() => isActive.value && props.retainFocus, val => {\n        val\n          ? document.addEventListener('focusin', onFocusin)\n          : document.removeEventListener('focusin', onFocusin)\n      }, { immediate: true })\n    }\n\n    function onAfterEnter () {\n      emit('afterEnter')\n      if (overlay.value?.contentEl && !overlay.value.contentEl.contains(document.activeElement)) {\n        overlay.value.contentEl.focus({ preventScroll: true })\n      }\n    }\n\n    function onAfterLeave () {\n      emit('afterLeave')\n    }\n\n    watch(isActive, async val => {\n      if (!val) {\n        await nextTick()\n        overlay.value!.activatorEl?.focus({ preventScroll: true })\n      }\n    })\n\n    useRender(() => {\n      const overlayProps = VOverlay.filterProps(props)\n      const activatorProps = mergeProps({\n        'aria-haspopup': 'dialog',\n        'aria-expanded': String(isActive.value),\n      }, props.activatorProps)\n      const contentProps = mergeProps({\n        tabindex: -1,\n      }, props.contentProps)\n\n      return (\n        <VOverlay\n          ref={ overlay }\n          class={[\n            'v-dialog',\n            {\n              'v-dialog--fullscreen': props.fullscreen,\n              'v-dialog--scrollable': props.scrollable,\n            },\n            props.class,\n          ]}\n          style={ props.style }\n          { ...overlayProps }\n          v-model={ isActive.value }\n          aria-modal=\"true\"\n          activatorProps={ activatorProps }\n          contentProps={ contentProps }\n          role=\"dialog\"\n          onAfterEnter={ onAfterEnter }\n          onAfterLeave={ onAfterLeave }\n          { ...scopeId }\n        >\n          {{\n            activator: slots.activator,\n            default: (...args) => (\n              <VDefaultsProvider root=\"VDialog\">\n                { slots.default?.(...args) }\n              </VDefaultsProvider>\n            ),\n          }}\n        </VOverlay>\n      )\n    })\n\n    return forwardRefs({}, overlay)\n  },\n})\n\nexport type VDialog = InstanceType<typeof VDialog>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}