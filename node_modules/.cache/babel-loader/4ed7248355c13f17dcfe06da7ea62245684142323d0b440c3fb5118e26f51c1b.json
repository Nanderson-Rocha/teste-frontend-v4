{"ast":null,"code":"import \"core-js/modules/es.array.flat.js\";\nimport \"core-js/modules/es.array.unscopables.flat.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"headline text-center\"\n};\nvar _hoisted_2 = {\n  \"class\": \"text-cyan-darken-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_v_card_title = _resolveComponent(\"v-card-title\");\n  var _component_v_col = _resolveComponent(\"v-col\");\n  var _component_v_row = _resolveComponent(\"v-row\");\n  var _component_v_card_text = _resolveComponent(\"v-card-text\");\n  var _component_v_card = _resolveComponent(\"v-card\");\n  return _openBlock(), _createBlock(_component_v_card, {\n    \"class\": \"mb-4\",\n    variant: _ctx.flat,\n    color: \"teal-lighten-5\",\n    rounded: \"shaped\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_v_card_title, {\n        \"class\": \"text-center\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createElementVNode(\"span\", _hoisted_1, _toDisplayString($data.equipmentName), 1 /* TEXT */)];\n        }),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_card_text, null, {\n        \"default\": _withCtx(function () {\n          return [_createElementVNode(\"p\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"strong\", null, \"Tempo Total de Trabalho:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.totalWorkTime) + \" horas\", 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[1] || (_cache[1] = _createElementVNode(\"strong\", null, \"Horas Produtivas:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($data.productiveHours) + \" horas\", 1 /* TEXT */)]), _createVNode(_component_v_row, {\n            justify: \"space-between\",\n            \"class\": \"align-center\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_v_col, null, {\n                \"default\": _withCtx(function () {\n                  return _cache[2] || (_cache[2] = [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, \"Produtividade:\")], -1 /* HOISTED */)]);\n                }),\n                _: 1 /* STABLE */\n              }), _createVNode(_component_v_col, {\n                \"class\": \"text-right\"\n              }, {\n                \"default\": _withCtx(function () {\n                  return [_createElementVNode(\"h2\", _hoisted_2, _toDisplayString($data.productivityPercentage.toFixed(2)) + \"%\", 1 /* TEXT */)];\n                }),\n                _: 1 /* STABLE */\n              })];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"variant\"]);\n}","map":{"version":3,"names":["_createBlock","_component_v_card","variant","_ctx","flat","color","rounded","_withCtx","_createVNode","_component_v_card_title","_createElementVNode","_hoisted_1","_toDisplayString","$data","equipmentName","_","_component_v_card_text","_createTextVNode","totalWorkTime","productiveHours","_component_v_row","justify","_component_v_col","_cache","_hoisted_2","productivityPercentage","toFixed"],"sources":["/home/bruno/Documentos/Teste Aiko - FRONT END/teste-frontend-v4/src/components/CardProductivity.vue"],"sourcesContent":["<template>\r\n <v-card\r\n  class=\"mb-4\"\r\n  :variant=\"flat\"\r\n  color=\"teal-lighten-5\"\r\n  rounded=\"shaped\"\r\n>\r\n  <v-card-title class=\"text-center\">\r\n    <span class=\"headline text-center\">{{ equipmentName }}</span>\r\n  </v-card-title>\r\n  \r\n  <v-card-text>\r\n    <p><strong>Tempo Total de Trabalho:</strong> {{ totalWorkTime }} horas</p>\r\n    <p><strong>Horas Produtivas:</strong> {{ productiveHours }} horas</p>\r\n\r\n    <v-row justify=\"space-between\" class=\"align-center\">\r\n      <v-col>\r\n        <p><strong>Produtividade:</strong></p>\r\n      </v-col>\r\n      <v-col class=\"text-right\">\r\n        <h2 class=\"text-cyan-darken-4\">{{ productivityPercentage.toFixed(2) }}%</h2>\r\n      </v-col>\r\n    </v-row>\r\n  </v-card-text>\r\n</v-card>\r\n\r\n</template>\r\n\r\n<script>\r\nimport equipmentStateHistory from \"../data/equipmentStateHistory.json\";\r\nimport equipmentState from \"../data/equipmentState.json\";\r\nimport equipmentData from \"../data/equipment.json\"; // Importar equipment.json\r\n\r\nexport default {\r\n  name: \"CardProductivity\",\r\n  props: {\r\n    equipmentId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      equipmentName: \"\", // Adiciona o campo para o nome do equipamento\r\n      totalWorkTime: 0,\r\n      productiveHours: 0,\r\n      productivityPercentage: 0,\r\n    };\r\n  },\r\n  methods: {\r\n    calculateProductivity() {\r\n      // Filtra o histórico de estados para o equipmentId\r\n      const equipmentHistory = equipmentStateHistory.find(\r\n        (history) => history.equipmentId === this.equipmentId\r\n      );\r\n\r\n      if (!equipmentHistory) {\r\n        console.error(\"Equipamento não encontrado.\");\r\n        return;\r\n      }\r\n\r\n      const states = equipmentHistory.states;\r\n      if (states.length === 0) {\r\n        console.error(\"Nenhum estado encontrado para o equipamento.\");\r\n        return;\r\n      }\r\n\r\n      // Busca o nome do equipamento no equipment.json\r\n      const equipment = equipmentData.find(\r\n        (e) => e.id === this.equipmentId\r\n      );\r\n      if (equipment) {\r\n        this.equipmentName = equipment.name;\r\n      } else {\r\n        this.equipmentName = \"Nome não encontrado\";\r\n      }\r\n\r\n      // Ordena os estados por data\r\n      states.sort((a, b) => new Date(a.date) - new Date(b.date));\r\n\r\n      let totalWorkTimeMs = 0;\r\n      let productiveHoursMs = 0;\r\n      let lastStateDate = new Date(states[0].date);\r\n\r\n      states.forEach((state, index) => {\r\n        const currentState = equipmentState.find(\r\n          (eState) => eState.id === state.equipmentStateId\r\n        );\r\n\r\n        if (currentState) {\r\n          const stateDate = new Date(state.date);\r\n\r\n          // Calcula o tempo total de trabalho\r\n          if (index === 0) {\r\n            totalWorkTimeMs = stateDate - new Date(states[0].date);\r\n          } else {\r\n            totalWorkTimeMs += stateDate - lastStateDate;\r\n          }\r\n\r\n          // Calcula o tempo de horas produtivas\r\n          if (currentState.name === \"Operando\" && index < states.length - 1) {\r\n            const nextStateDate = new Date(states[index + 1].date);\r\n            productiveHoursMs += nextStateDate - stateDate;\r\n          }\r\n\r\n          lastStateDate = stateDate;\r\n        }\r\n      });\r\n\r\n      this.totalWorkTime = totalWorkTimeMs / 3600000; // Convertendo de ms para horas\r\n      this.productiveHours = productiveHoursMs / 3600000; // Convertendo de ms para horas\r\n      this.productivityPercentage = (this.productiveHours / this.totalWorkTime) * 100;\r\n    },\r\n  },\r\n  watch: {\r\n    equipmentId: \"calculateProductivity\",\r\n  },\r\n  mounted() {\r\n    this.calculateProductivity();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.headline {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: rgb(46, 172, 172);\r\n  text-align: center; /* Centraliza o texto */\r\n}\r\n</style>\r\n"],"mappings":";;;;;EAQU,SAAM;AAAsB;;EAY1B,SAAM;AAAoB;;;;;;;uBAnBrCA,YAAA,CAuBQC,iBAAA;IAtBP,SAAM,MAAM;IACXC,OAAO,EAAEC,IAAA,CAAAC,IAAI;IACdC,KAAK,EAAC,gBAAgB;IACtBC,OAAO,EAAC;;IALV,WAAAC,QAAA,CAOE;MAAA,OAEe,CAFfC,YAAA,CAEeC,uBAAA;QAFD,SAAM;MAAa;QAPnC,WAAAF,QAAA,CAQI;UAAA,OAA6D,CAA7DG,mBAAA,CAA6D,QAA7DC,UAA6D,EAAAC,gBAAA,CAAvBC,KAAA,CAAAC,aAAa,iB;;QARvDC,CAAA;UAWEP,YAAA,CAYcQ,sBAAA;QAvBhB,WAAAT,QAAA,CAYI;UAAA,OAA0E,CAA1EG,mBAAA,CAA0E,Y,0BAAvEA,mBAAA,CAAyC,gBAAjC,0BAAwB,sBAZvCO,gBAAA,CAYgD,GAAC,GAAAL,gBAAA,CAAGC,KAAA,CAAAK,aAAa,IAAG,QAAM,gB,GACtER,mBAAA,CAAqE,Y,0BAAlEA,mBAAA,CAAkC,gBAA1B,mBAAiB,sBAbhCO,gBAAA,CAayC,GAAC,GAAAL,gBAAA,CAAGC,KAAA,CAAAM,eAAe,IAAG,QAAM,gB,GAEjEX,YAAA,CAOQY,gBAAA;YAPDC,OAAO,EAAC,eAAe;YAAC,SAAM;;YAfzC,WAAAd,QAAA,CAgBM;cAAA,OAEQ,CAFRC,YAAA,CAEQc,gBAAA;gBAlBd,WAAAf,QAAA,CAiBQ;kBAAA,OAAsCgB,MAAA,QAAAA,MAAA,OAAtCb,mBAAA,CAAsC,YAAnCA,mBAAA,CAA+B,gBAAvB,gBAAc,E;;gBAjBjCK,CAAA;kBAmBMP,YAAA,CAEQc,gBAAA;gBAFD,SAAM;cAAY;gBAnB/B,WAAAf,QAAA,CAoBQ;kBAAA,OAA4E,CAA5EG,mBAAA,CAA4E,MAA5Ec,UAA4E,EAAAZ,gBAAA,CAA1CC,KAAA,CAAAY,sBAAsB,CAACC,OAAO,OAAM,GAAC,gB;;gBApB/EX,CAAA;;;YAAAA,CAAA;;;QAAAA,CAAA;;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}